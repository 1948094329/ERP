webpackJsonp([2],{550:function(e,t,n){function a(e){n(566)}var o=n(204)(n(557),n(574),a,"data-v-5d654a5c",null);e.exports=o.exports},553:function(e,t,n){"use strict";t.__esModule=!0;var a=n(559),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}},557:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(205),o=n.n(a),r=n(553),s=n.n(r),i=n(87),l=n(137),d=n(86);t.default={name:"login",data:function(){return{logining:!1,winSize:{width:"",height:""},formOffset:{position:"absolute",left:"",top:""},login_actions:{disabled:!1},data:{username:"admin",password:"cloudy",token:""},rule_data:{username:[{validator:function(e,t,n){""===t?n(new Error("请输入用户名")):/^[a-zA-Z0-9_-]{2,16}$/.test(t)?n():n(new Error("用户名至少6位,由大小写字母和数字,-,_,组成"))},trigger:"blur"}],password:[{validator:function(e,t,n){""===t?n(new Error("请输入密码")):/^[a-zA-Z0-9_-]{6,16}$/.test(t)?n():n(new Error("密码至少6位,由大小写字母和数字,-,_组成"))},trigger:"blur"}]}}},computed:s()({},n.i(d.b)({loadRoutersDone:function(e){return e.loadRoutersDone},backgroundMenus:function(e){return e.backgroundMenus}})),created:function(){this.setSize()},methods:s()({setSize:function(){this.winSize.width=window.innerWidth+"px",this.winSize.height=window.innerHeight+"px",this.formOffset.left=parseInt(this.winSize.width)/2-175+"px",this.formOffset.top=parseInt(this.winSize.height)/2-178+"px"},onLogin:function(e){var t=this;this.$refs[e].validate(function(e){if(e){t.logining=!0;var n={username:t.data.username,password:t.data.password};t.$ajax.post("/login",n).then(function(e){t.logining=!1;var n=e.data,a=n.code,r=n.msg,s=n.data;if("success"==a){var l=s.user;t.$message({message:r,type:"success"}),i.a.set("userinfo",o()(l)),t.setGlobalUserInfo(l),i.a.set("groups",o()(s.groups));var d={groups:s.groups,isAdmin:l.IsAdmin};t.$ajax.post("/menu",d).then(function(e){var n=e.data,a=n.code,r=n.msg,s=n.data;if("success"==a){t.$message({message:r,type:"success"});var l=t.menuList2Json(s.menus);i.a.set("backgroundMenus",o()(l)),t.setGlobalUserMenu(l),t.loadBackgroundRouters()}else t.$message({message:r,type:"error"});t.$router.push("/admin")})}else t.$message({message:r,type:"error"})})}})},menuList2Json:function(e){var t=[],n=[];if(null==e)return t;for(var a=e.length,o=0;o<a;o++){for(var r=e[o],s=r.ParentRight-r.ParentLeft,i=!1,l=0;l<n.length;l++)s==n[l]&&(i=!0);0==i&&n.push(s)}n.sort();for(var d=0,u=n.length;d<u;d++)for(var c=n[d],p=0;p<a;p++){var f=e[p],g=f.ParentRight-f.ParentLeft;if(c==g)if(null!=f.Parent)for(var A=f.Parent.Index,m=0;m<a;m++)e[m].Index==A&&("children"in e[m]||(e[m].children=[]),delete f.Parent,delete f.ParentLeft,delete f.ParentRight,f.path="/admin/"+f.path,e[m].children.push(f));else delete f.Parent,delete f.ParentLeft,delete f.ParentRight,f.path="/admin/"+f.path,t.push(f)}return t},loadBackgroundRouters:function(){if(0==this.loadRoutersDone){var e=n.i(l.a)(this.backgroundMenus);this.$router.addRoutes([e]),this.setloadRoutersDone(!0)}}},n.i(d.c)({setGlobalUserInfo:"GLOBAL_SET_USERINFO",setGlobalUserMenu:"GLOBAL_SET_UER_MENUS",setloadRoutersDone:"GLOBAL_LOAD_ROUTES_DONE"}))}},559:function(e,t,n){e.exports={default:n(560),__esModule:!0}},560:function(e,t,n){n(562),e.exports=n(60).Object.assign},561:function(e,t,n){"use strict";var a=n(65),o=n(136),r=n(89),s=n(207),i=n(206),l=Object.assign;e.exports=!l||n(64)(function(){var e={},t={},n=Symbol(),a="abcdefghijklmnopqrst";return e[n]=7,a.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=a})?function(e,t){for(var n=s(e),l=arguments.length,d=1,u=o.f,c=r.f;l>d;)for(var p,f=i(arguments[d++]),g=u?a(f).concat(u(f)):a(f),A=g.length,m=0;A>m;)c.call(f,p=g[m++])&&(n[p]=f[p]);return n}:l},562:function(e,t,n){var a=n(88);a(a.S+a.F,"Object",{assign:n(561)})},564:function(e,t,n){t=e.exports=n(548)(!0),t.push([e.i,".login[data-v-5d654a5c]{background:#1f2d3d}.login .loginform[data-v-5d654a5c]{box-shadow:0 0 8px 0 rgba(0,0,0,.06),0 1px 0 0 rgba(0,0,0,.02);border-radius:5px;-moz-border-radius:5px;background-clip:padding-box;margin-bottom:3rem;background-color:#f9fafc;border:2px solid #8492a6}.login .title[data-v-5d654a5c]{margin:0 auto 40px;text-align:center;color:red;font-weight:400;font-size:2rem}.login .title span[data-v-5d654a5c]{cursor:pointer}.login .title span.active[data-v-5d654a5c]{font-weight:700;font-size:18px}.login .loginform[data-v-5d654a5c]{width:350px;padding:35px 35px 15px}","",{version:3,sources:["C:/GoPackage/src/golangERP/web_pc/src/views/admin/global/login.vue"],names:[],mappings:"AACA,wBACE,kBAAoB,CACrB,AACD,mCACI,+DAA6E,AAC7E,kBAAmB,AACnB,uBAAwB,AACxB,4BAA6B,AAC7B,mBAAoB,AACpB,yBAA0B,AAC1B,wBAA0B,CAC7B,AACD,+BACI,mBAA2B,AAC3B,kBAAmB,AACnB,UAAW,AACX,gBAAoB,AACpB,cAAgB,CACnB,AACD,oCACM,cAAgB,CACrB,AACD,2CACQ,gBAAkB,AAClB,cAAgB,CACvB,AACD,mCACI,YAAa,AACb,sBAA6B,CAChC",file:"login.vue",sourcesContent:["\n.login[data-v-5d654a5c] {\n  background: #1F2D3D;\n}\n.login .loginform[data-v-5d654a5c] {\n    box-shadow: 0 0px 8px 0 rgba(0, 0, 0, 0.06), 0 1px 0px 0 rgba(0, 0, 0, 0.02);\n    border-radius: 5px;\n    -moz-border-radius: 5px;\n    background-clip: padding-box;\n    margin-bottom: 3rem;\n    background-color: #F9FAFC;\n    border: 2px solid #8492A6;\n}\n.login .title[data-v-5d654a5c] {\n    margin: 0px auto 40px auto;\n    text-align: center;\n    color: red;\n    font-weight: normal;\n    font-size: 2rem;\n}\n.login .title span[data-v-5d654a5c] {\n      cursor: pointer;\n}\n.login .title span.active[data-v-5d654a5c] {\n        font-weight: bold;\n        font-size: 18px;\n}\n.login .loginform[data-v-5d654a5c] {\n    width: 350px;\n    padding: 35px 35px 15px 35px;\n}\n"],sourceRoot:""}])},566:function(e,t,n){var a=n(564);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(549)("00d42ff2",a,!0)},574:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login",style:e.winSize},[n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"content"},[n("el-form",{ref:"loginData",staticClass:"loginform",style:e.formOffset,attrs:{"label-position":"left","label-width":"0px",model:e.data,rules:e.rule_data}},[n("h3",{staticClass:"title"},[n("span",[e._v("系统登录")])]),e._v(" "),n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"请输入账号"},model:{value:e.data.username,callback:function(t){e.data.username=t},expression:"data.username"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入密码"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.onLogin("loginData")}},model:{value:e.data.password,callback:function(t){e.data.password=t},expression:"data.password"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onLogin("loginData")}}},[e._v("登录")])],1)],1)],1)])],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=2.36fc0b6258227a88f4c4.js.map